!vgrid_gutter_width ||= 20px
!vgrid_grid_width ||= 960px
!vgrid_columns ||= 12
 
=grid_container
  :margin-left auto
  :margin-right auto
  :width= !vgrid_grid_width
 
=grid_width(!n, !cols = !vgrid_columns, !gutter_width = !vgrid_gutter_width)
  :width= (!vgrid_grid_width / !cols) * !n - !gutter_width
 
=grid_unit_base(!gutter_width = !vgrid_gutter_width)
  :display inline
  :float left
  :position relative
  :margin
    :left= !gutter_width / 2
    :right= !gutter_width / 2
 
=grid(!n, !cols = !vgrid_columns, !gutter_width = !vgrid_gutter_width)
  +grid_unit_base(!gutter_width)
  +grid_width(!n, !cols, !gutter_width)
 
=alpha
  :margin-left 0
 
=omega
  :margin-right 0

=grid_children
  .alpha
    +alpha
  .omega
    +omega
 
=grids(!cols = !vgrid_columns, !gutter_width = !vgrid_gutter_width)
  #{enumerate(".grid",1,!cols,"_")}
    +grid_unit_base
  @for !n from 1 through !cols
    .grid_#{!n}
      +grid_width(!n, !cols, !gutter_width)
 
=grid_prefix(!n, !cols = !vgrid_columns)
  :padding-left= (!vgrid_grid_width / !cols) * !n
 
=grid_prefixes(!cols = !vgrid_columns)
  @for !n from 1 through !cols - 1
    .prefix_#{!n}
      +grid_prefix(!n, !cols)
 
=grid_suffix(!n, !cols = !vgrid_columns)
  :padding-right= (!vgrid_grid_width / !cols) * !n
 
=grid_suffixes(!cols = !vgrid_columns)
  @for !n from 1 through !cols - 1
    .suffix_#{!n}
      +grid_suffix(!n, !cols)

=grid_push(!n, !cols = !vgrid_columns)
  :left= (!vgrid_grid_width / !cols) * !n

=grid_pushes(!cols = !vgrid_columns)
  @for !n from 1 through !cols - 1
    .prefix_#{!n}
      +grid_push(!n, !cols)

=grid_pull(!n, !cols = !vgrid_columns)
  :right= (!vgrid_grid_width / !cols) * !n * -1

=grid_pulls(!cols = !vgrid_columns)
  @for !n from 1 through !cols - 1
    .prefix_#{!n}
      +grid_pull(!n, !cols)
 
=grid_system(!cols = !vgrid_columns)
  .container_#{!cols}
    +grid_container
  +grids(!cols)
  +grid_children
  +grid_prefixes(!cols)
  +grid_suffixes(!cols)
  +grid_pushes(!cols)
  +grid_pulls(!cols)